# 外部代码集成指南 (External Code Integration Guide)

本文档旨在说明如何在本程序（ok-dna）中添加、配置及使用外部代码（扩展/插件）。请在操作前仔细阅读以下说明及免责条款。

## 📂 目录结构规范

为了确保外部代码能被程序正确识别，请遵循以下目录结构整理文件：

```text
[mod]
  └── [您的外部代码文件夹名称]
        ├── scripts/             <-- (必须) 主逻辑脚本目录
        ├── map/                 <-- (可选) 主地图数据目录
        └── evacuation/          <-- (未实装)(可选) 独立撤离模块目录
              ├── scripts/       <-- (未实装)(若启用撤离则必须) 撤离逻辑脚本
              └── map/           <-- (未实装)(可选) 撤离专用地图
```

### 结构说明
1. **文件夹形式**：所有外部代码必须以**文件夹**的形式添加。
2. **主目录要求**：
    - `scripts`：存放副本主要运行逻辑，**必须存在**。
    - `map`：存放副本主要地图数据，**可选**。
3. **(未实装)撤离模块 (Evacuation)**：
    - 您可以在根目录下建立名为 `evacuation` 的子目录作为独立的撤离模块。
    - **功能**：如果当前的“副本类型”支持撤离功能，当程序判定需要离开副本时，将优先执行 `evacuation/scripts` 内的逻辑。
    - **注意**：若创建了 `evacuation` 目录，其内部必须包含 `scripts` 子目录。

---

## 🚀 安装与启用

1. **添加文件**：将整理好的外部代码文件夹（包含上述结构）放入本程序的根目录下。
2. **重启程序**：添加完成后，请务必**重启本程序**以刷新目录列表。
3. **启用设置**：重启后，进入程序的对应子选项/设置界面，找到该外部代码并勾选“启用”。

---

## ⚙️ 环境与操作设置

由于外部代码可能基于特定的游戏环境编写，使用前请确认满足以下要求：

- **画面设置**：请检查是否需要调整特定的**分辨率**（Resolution）。
- **性能设置**：请确认是否需要锁定特定的**帧率**（Frame Rate）。
- **按键映射**：请按照外部代码的说明配置游戏内的按键设定。

> ⚠️ **注意**：如果未按照外部代码要求的环境运行，可能会导致逻辑错误或运行失败。

---

## 🔧 高级功能与接口

本程序为外部代码提供了一些内置的便捷接口：

### 角色复位功能
在代码配置中，可以通过以下键值对调用 ok-dna 内建的角色复位（防卡死/重置）功能：
```json
"key": "f4"
```
*当触发此按键逻辑时，程序将执行内部预设的角色复位操作。*

---

## ⚖️ 免责声明 (Disclaimer)

**请仔细阅读以下条款：**

1. **仅供便利**：本程序提供的外部代码接口仅为方便用户扩展功能而设。
2. **个人行为**：用户自行添加、修改或导入的任何代码均属于用户个人行为。
3. **无担保声明**：
   - 开发者不对用户添加的任何外部代码承担安全责任。
   - 开发者不保证外部代码的兼容性、稳定性及安全性。
4. **责任限制**：
   - 因使用外部代码导致的系统故障、游戏封号、数据丢失、硬件损坏或任何形式的经济损失，开发者**概不负责**。
   - 用户应自行评估代码来源的可靠性及运行风险，并承担使用该代码产生的一切后果。

**建议仅加载来自可信来源或您亲自审查过的代码。**